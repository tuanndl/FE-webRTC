(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(n,e){},116:function(n,e){},118:function(n,e){},129:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),c=t(58),o=t.n(c),i=(t(72),t(63)),u=t(8),l=t(131),s=function(n){return a.a.createElement("button",{onClick:function(){var e=Object(l.a)();n.history.push("/room/".concat(e))}},"Create room")},f=t(65),m=t(66),h=t(23),d=t(59),g=t.n(d),p=t(30),v=t.n(p),w=t(24);function b(){var n=Object(h.a)(["\n  height: 40%;\n  width: 50%;\n"]);return b=function(){return n},n}function j(){var n=Object(h.a)(["\n  height: 40%;\n  width: 50%;\n"]);return j=function(){return n},n}function E(){var n=Object(h.a)(["\n  padding: 20px;\n  display: flex;\n  height: 100vh;\n  width: 90%;\n  margin: auto;\n  flex-wrap: wrap;\n"]);return E=function(){return n},n}var O=w.a.div(E()),I=w.a.video(j()),y=(w.a.audio(b()),function(n){var e=Object(r.useRef)();return Object(r.useEffect)((function(){n.peer.on("stream",(function(n){e.current.srcObject=n}))}),[]),a.a.createElement(I,{playsInline:!0,autoPlay:!0,ref:e})}),D={height:window.innerHeight/2,width:window.innerWidth/2},k=function(n){var e=Object(r.useState)([]),t=Object(m.a)(e,2),c=t[0],o=t[1],i=Object(r.useRef)(),u=Object(r.useRef)(),l=Object(r.useRef)([]),s=n.match.params.roomID;return Object(r.useEffect)((function(){try{i.current=g.a.connect("/"),navigator.mediaDevices.getUserMedia({video:D,audio:!0}).then((function(n){u.current.srcObject=n,i.current.emit("join room",s),i.current.on("all users",(function(e){console.log(e);var t=[];e.forEach((function(e){var r=function(n,e,t){var r=new v.a({initiator:!0,trickle:!1,stream:t});return r.on("signal",(function(t){i.current.emit("sending signal",{userToSignal:n,callerID:e,signal:t})})),r}(e,i.current.id,n);l.current.push({peerID:e,peer:r}),t.push(r),o([].concat(t))}))})),i.current.on("user joined",(function(e){var t=function(n,e,t){var r=new v.a({initiator:!1,trickle:!1,stream:t});return r.on("signal",(function(n){i.current.emit("returning signal",{signal:n,callerID:e})})),r.signal(n),r}(e.signal,e.callerID,n);l.current.push({peerID:e.callerID,peer:t}),o((function(n){return[].concat(Object(f.a)(n),[t])}))})),i.current.on("receiving returned signal",(function(n){l.current.find((function(e){return e.peerID===n.id})).peer.signal(n.signal)}))}))}catch(n){console.log(n)}}),[]),a.a.createElement(O,null,a.a.createElement(I,{muted:!0,ref:u,autoPlay:!0,playsInline:!0}),c.map((function(n,e){return a.a.createElement(y,{key:e,peer:n})})))};var x=function(){return a.a.createElement(i.a,null,a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/",exact:!0,component:s}),a.a.createElement(u.a,{path:"/room/:roomID",component:k})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},67:function(n,e,t){n.exports=t(129)},72:function(n,e,t){}},[[67,1,2]]]);
//# sourceMappingURL=main.100e028e.chunk.js.map